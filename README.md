# Alchemy Final Project

Author: Jos√© Molina Colmenero

## The project

This project is a proposal to allow spending (burning) NFTs in exchange for goods and services in merchant stores.
The main idea is that these partially fungible tokens that follow the ERC-1155 standard are generated by
a trusted third party. Let's call it the "administrator".

The administrator can add the so-called "merchant operator". A merchant operator is an address that has permission to approve spending NFTs on behalf of the merchant.
To make it easy, we can think of a merchant operator as a store, where the employer is allowed to accept the NFT as if it would be a normal voucher.

Also, the administrator can mint NFTs (but not spend them!) on behalf of the merchants. This agreement merchant-administrator is made
off-chain, where both parties agree to create a set of NFTs or collections. Once minted, tokens are transferred to a given address, which
is in charge of distributing the tokens amount the merchant's potential customers.

So here is the fun: these tokens are meant to be spent in exchange for goods and services in the merchant's physical store. In order to do
so, three signatures are needed:
- The customer that owns the tokens.
- The merchant.
- The administrator.

IF the three parties agree on a common state, they have to cryptographically sign to confirm the operation. Both merchant and client 
provide a signature with the private key, while the administrator implicitly agrees with the operation by broadcasting the transaction
to the blockchain, hence removing the need for both merchant and customer to have ETH in order to pay for the fees.

Once the transaction is broadcasted, the smart contract is prepared to check all signatures and, if everything is OK, burn the token.


## Setup

1. Install the dependencies and run the test blockchain.

```shell
$ cd nft-payment-gateway
$ yarn install
$ yarn run ganache
```

2. Deploy the contracts and create the first merchant operator and NFT.

Run this on a different terminal:

```shell
$ cd nft-payment-gateway
$ yarn run deploy
```

3. Boot the android apps, both [merchant-app](./merchant-app) and [client-app](./client-app).
If you can, use two different android devices, one for each app.

4. Use the client app to generate the QR code.
5. Use the merchant app to scan the QR code.
6. Within the merchant app, approve spending (burning) the NFT.


## Tests

Simply run the following command:
```shell
$ yarn test
```
